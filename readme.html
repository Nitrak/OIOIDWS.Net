<!DOCTYPE HTML>
<html>
<head>
	<title>Getting started with OIOIDWS.Net</title>
</head>

<body>

<h1>Getting started with OIOIDWS.Net</h1>

<p>
	OIOIDWS.Net is a .Net-based reference implementation of the OIOIDWS 1.0.1a profile. <br>
	The OIOIDWS.Net components can be used by service providers to act as a Web Service Consumer (WSC) or Web Service Producer (WSP), using the SOAP or REST standard.<br>
	This is the codebase that the OIOIDWS.Net components are built from.
</p>

<h2>Resource links</h2>
<ul>
	<li><a href="https://digitaliser.dk/group/705156" target="_blank">Project maintenance</a></li>
	<li><a href="https://www.nuget.org/profiles/Digitaliseringsstyrelsen" target="_blank">Nuget packages (prefixed Digst.OioIdws)</a></li>
	<li><a href="https://svn.softwareborsen.dk/OIOIDWS/" target="_blank">Code repository</a></li>
</ul>

<h2>Repository content</h2>
<ul>
	<li><b>Build</b>: Contains script to create and publish NuGet packages</li>
	<li>
		<b>Examples</b>: Contains examples that illustrates how to use OIOIDWS.Net
		<ul>
			<li><b>Digst.OioIdws.Rest.Examples.AS</b>: Example on how to run the Authentication Server in the REST variant of OIOIDWS. AS stands for Authorization Server and is the same term used in [OIO-IDWS-REST].</li>
			<li><b>Digst.OioIdws.Rest.Examples.Client</b>: Example on how to run the WSC/Client in the REST variant of OIOIDWS in the signature case scenario. In app.config it can be configured whether to use the Digst.OioIdws.Rest.Examples.ServerAndASCombined example or Digst.OioIdws.Rest.Examples.Server combined with Digst.OioIdws.Rest.Examples.AS example.</li>
			<li><b>Digst.OioIdws.Rest.Examples.ClientNuget</b>: Contains code that illustrates how to use OIOIDWS.Net</li>
			<li><b>Digst.OioIdws.Rest.Examples.ServerAndASCombined</b>: Same as Digst.OioIdws.Rest.Examples.Client but based on the latest public available NuGet package.</li>
			<li><b>Digst.OioIdws.Rest.Examples.ServerAndASCombinedNuget</b>: Example on how to run the WSP/Server in the REST variant of OIOIDWS where the AS is running in the same process.</li>
			<li><b>Digst.OioIdws.Rest.Examples.Server</b>: Same as Digst.OioIdws.Rest.Examples.ServerCombined but based on the latest public available NuGet package.</li>
			<li><b>Digst.Oioidws.WscBootstrapExample</b>: Example on how to run the WSP/Server in the REST variant of OIOIDWS.</li>
			<li>
				<b>Digst.OioIdws.WscExample</b>: Example on how to run the WSC/Client in the SOAP variant of OIOIDWS in the bootstrap token scenario. It shows how to build a small SAML 2.0 Service Provider (SP) that also acts as a Web Service Consumer (WSC). It requires the Digst.OioIdws.WspExample to be up and running. See [OIO-BTP] for more information on configuring the SP to recieve bootstrap tokens. Note that when running the bootstrap scenario, the end-users’ identity is what the WSP sees, whereas in the signature scenario, it is the identity of the WSC that is seen by the WSP. The following things are already setup but is relevant to know when setting up your own combined SP/WSC in production:
				<ul>
					<li>The "urn:liberty:disco:2006-08:DiscoveryEPR" needs to be part of the RequestedAttributes in the SP metadata that is registered in the IdP. This informs the IdP to return a bootstrap token.</li>
					<li>The SP and WSC must be registered with the same certificate in the NemLog-in administration module.</li>
				</ul>
			</li>
			<li><b>Digst.OioIdws.WscExample</b>: Example on how to run the WSC/Client in the SOAP variant of OIOIDWS in the signature case scenario. It requires the Digst.OioIdws.WspExample to be up and running.</li>
			<li><b>Digst.OioIdws.WscExampleNuGet</b>: Same as Digst.OioIdws.WscExample but based on the latest public available NuGet package.</li>
			<li><b>Digst.OioIdws.WscJavaExample</b>: Example on how to run the WSC/Client in the SOAP variant of OIOIDWS in the signature case scenario against a Java WSP/Server. Requires that a Java WSP/Server is up and running. Checkout OIOIDWS.Java on how to do that.</li>
			<li><b>Digst.OioIdws.WspExample</b>: Example on how to run the WSP/Server in the SOAP variant of OIOIDWS.</li>
			<li><b>Digst.OioIdws.WspExampleNuGet</b>: Same as Digst.OioIdws.WspExample but based on the latest public available NuGet package.</li>
		</ul>
	</li>
	<li>
		<b>Misc</b>: Contains miscellaneous stuff
		<ul>
			<li><b>Certificates</b>: Alle certificates needed to run the examples.</li>
			<li><b>SOAP examples</b>: Contains examples on requests and responses for both OioWsTrust communication between WSC and STS and LibBas communication between WSC and WSP.</li>
			<li><b>Specifications</b>: All the specifications related to OIOIDWS are located here in PDF. They are only placed here to document how the specifications were at the time of development. All specifications are named [XXX] and are also referenced by that name.</li>
			<li><b>Token examples</b>: Contains examples on IdP issued bootstrap token and STS issued access token.</li>
		</ul>	
	</li>
	<li><b>Setup</b>: Contains powershell script to auto setup the development environment.</li>
	<li>
		<b>Source</b>: Source code for the OIOIDWS.Net framework
		<ul>
			<li><b>Digst.OioIdws.Common</b>: Contains common stuff for the SOAP variant.</li>
			<li><b>Digst.OioIdws.LibBas</b>: Contains the implementation of the [LIB-BAS] specification.</li>
			<li><b>Digst.OioIdws.OioWsTrust</b>: Contains the implementation of the [OIO-WST] specification.</li>
			<li><b>Digst.OioIdws.Rest.Client</b>: Contains the client implementation of the [OIO-IDWS-REST] specification. It handles the communication between STS, AS and WSP.</li>
			<li><b>Digst.OioIdws.Rest.Common</b>: Contains common stuff for the REST variant.</li>
			<li><b>Digst.OioIdws.Rest.Server</b>: Contains the server and AS implementation of the [OIO-IDWS-REST] specification. The AS stores information from the security token and issues access tokens. The WSP contains the authentication middleware that logs the user into the WSP.</li>
			<li><b>Digst.OioIdws.Wsc</b>: Encapsulates the usage and configuration of Digst.OioIdws.LibBas and Digst.OioIdws.OioWsTrust.</li>
			<li><b>Digst.OioIdws.Wsp</b>: Encapsulates the usage and configuration of Digst.OioIdws.LibBas </li>
		</ul>
	</li>
	<li>
		<b>Tests</b>: Contains various unit and integration tests
		<ul>
			<li><b>Digst.OioIdws.LibBas.LongRunningTest</b>: Contains long running tests of Digst.OioIdws.LibBas.</li>
			<li><b>Digst.OioIdws.LibBas.Test</b>: Contains tests of Digst.OioIdws.LibBas.</li>
			<li><b>Digst.OioIdws.OioWsTrust.Test</b>: Contains tests of Digst.OioIdws.OioWsTrust.</li>
			<li><b>Digst.OioIdws.Rest.Server.Tests</b>: Contains tests of Digst.OioIdws.Rest.Server</li>
			<li><b>Digst.OioIdws.Rest.SystemTests</b>: Contains tests of Digst.OioIdws.Rest.Client and Digst.OioIdws.Rest.Server.</li>
			<li><b>Digst.OioIdws.Test.Common</b>: Common stuff user by the other test libaries.</li>
		</ul>
	</li>
	<li><b>developer notes.html</b>: Information relevant for developers of OIOIDWS.Net</li>
	<li><b>Digst.OioIdws.sln</b>: Visual Studio 2017 solution file</li>
	<li><b>readme.html</b>: This file</li>
</ul>

<h2>Getting started</h2>
<p>
	The source code contains everything you need to get a demonstration environment up and running, federating with NemLog-in IdP and NemLog-in STS. 
</p>
<p><i>The full documentation of OIOIDWS.Net is a combination of the various readme files, API documentation and the examples provided.</i></p>
<p>For a quick setup, you must do the following:</p>
<ul>
	<li>Run the script 'Setup\setup_prerequisites.ps1' from an elevated powershell. This installs all required certificates and performs sslcert bindings to be able to host local websites using https</li>
	<li>Open the solution 'Digst.OioIdws.sln' in Visual Studio 2017 (Elevated mode) and build it (if you get errors on external dependencies, ensure nuget packages are being restored)</li>
	<li>The external IP address must be white listed at NETS in order to be able to make revocation check of the test FOCES certificates.</li>
	<li>Set the projects 'Digst.OioIdws.Rest.Examples.ServerAndASCombined', 'Digst.OioIdws.WspExample' and 'Digst.Oioidws.WscBootstrapExample' as startup projects by right-clicking solution, select 'properties', selecting 'Multiple start projects'.</li>
	<li>For the web project, you must manually set the 'Start URL' that IIS express uses. You do this by:
		<ul>
			<li>right click project 'Digst.Oioidws.WscBootstrapExample', select 'properties', select the tab 'Web', alter the 'Start Action' to the radio button 'Start URL', specifying 'https://oiosaml-net.dk:20002'.</li>
		</ul>
	<li>Run the solution which should start a SOAP WSP, REST WSP and a combined SOAP/REST WSC.</li>
</ul>
<p>This should start one browser window for the SOAP/REST WSC 'Digst.Oioidws.WscBootstrapExample', and two console windows for 'Digst.OioIdws.WspExample' and 'Digst.OioIdws.Rest.Examples.ServerAndASCombined'.<br>
In the web site you should now be able to log in using NemLog-in, and make SOAP or REST calls in either the bootstrap signature case scenario.<br>
You must use an certificate employee certificate from the <a href="https://test-nemlog-in.dk/testportal/" target="_blank">NemLog-In testportal.</a><br>

</body>
</html>